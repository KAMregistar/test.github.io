<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Details</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&family=Rubik:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css"/>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<div id="menu-bar">
    <img src="kam.png" alt="KAM Logo" class="logo">
    <h1><a href="index.html" style="text-decoration:none; color:inherit;">Registar</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h1>
    <div>
        KLASE
        <div class="dropdown" id="klase-dropdown"></div>
    </div>
    <div>
        SVOJSTVA
        <div class="dropdown" id="svojstva-dropdown"></div>
    </div>
    <div id="prefiksi"> 
        PREFIKSI
    </div>
    <div>
        Pomoć
    </div>
</div>

<div id="content">
    <p>Loading property details...</p>
</div>

<!-- Footer with black background and white text -->
<div id="footer">
    © 2024 Nacionalna i sveučilišna knjižnica u Zagrebu. Sva prava pridržana. | Hrvatske bratske zajednice 4, 10000 Zagreb, Hrvatska | Tel. +385 1 616 4021
</div>

<script>
    // Extract CURIE from URL
    const urlParams = new URLSearchParams(window.location.search);
    const curie = urlParams.get('curie');

    if (curie) {
        const content = document.getElementById('content');
        const storedData = localStorage.getItem('ontologyData');
        const data = storedData ? JSON.parse(storedData) : null;

        if (data) {
            const propertyData = Object.values(data).find(item => {
                return item['http://www.registar.kam.hr/ontologies/ont.owl/ID'] && item['http://www.registar.kam.hr/ontologies/ont.owl/ID'][0]['@value'] === curie;
            });

            if (propertyData) {
                const id = propertyData['@id'] || 'Unknown ID';
                const label = propertyData['http://www.w3.org/2000/01/rdf-schema#label'] ? propertyData['http://www.w3.org/2000/01/rdf-schema#label'][0]['@value'] : 'Unknown Label';
                const type = propertyData['@type'] ? propertyData['@type'].join(', ') : 'Unknown Type';
                const definition = propertyData['http://www.registar.kam.hr/ontologies/ont.owl/definition'] ? propertyData['http://www.registar.kam.hr/ontologies/ont.owl/definition'][0]['@value'] : 'No definition available';

                const curieValue = curie;

                content.innerHTML = `<h2>Details for Property: ${curieValue}</h2>`;
                content.innerHTML += `<table id="propertyTable" class="display">
                    <tr><td>ID</td><td>${id}</td></tr>
                    <tr><td>Label</td><td>${label}</td></tr>
                    <tr><td>Type</td><td>${type}</td></tr>
                    <tr><td>Definition</td><td>${definition}</td></tr>
                    <tr><td>CURIE</td><td>${curieValue}</td></tr>
                </table>`;

                // Initialize DataTables for the property details
                $(document).ready(function() {
                    $('#propertyTable').DataTable();
                });
            } else {
                content.innerHTML = '<p>Property not found.</p>';
            }
        } else {
            content.innerHTML = '<p>No data available.</p>';
        }
    } else {
        content.innerHTML = '<p>No CURIE specified.</p>';
    }
</script>

</body>
</html>
